<?xml version="1.0" encoding="utf-8" ?>

<component
  name="ViewAllScreen"
  extends="Group"
  xsi:noNamespaceSchemaLocation="https://devtools.web.roku.com/schema/RokuSceneGraph.xsd">

  <!-- Script principal de ViewAllScreen. -->
  <script type="text/brightscript" uri="ViewAllScreen.brs" />
  <script type="text/brightscript" uri="pkg:/source/StreamingConstants.brs" />
  <script type="text/brightscript" uri="pkg:/source/Storage.brs" />
  <script type="text/brightscript" uri="pkg:/source/Services/Watch.brs" />
  <script type="text/brightscript" uri="pkg:/source/Services/Streamings.brs" />
  <script type="text/brightscript" uri="pkg:/source/Utils/i18nUtils.brs" />
  <!-- Script de utilidades base reutilizadas por el flujo de ViewAll. -->
  <script type="text/brightscript" uri="pkg:/source/Utils.brs" />
  <!-- Script de utilidades de reintentos para manejo de acciones pendientes. -->
  <script type="text/brightscript" uri="pkg:/source/Utils/RetryUtils.brs" />
  <!-- Script de constantes de carouseles para tipos de imagen del summary. -->
  <script type="text/brightscript" uri="pkg:/source/CarouselConstants.brs" />
  <!-- Script del servicio de reintentos. -->
  <script type="text/brightscript" uri="pkg:/source/Services/Retry.brs" />
  <!-- Script del servicio de vistas de contenido para obtener carrusel ViewAll. -->
  <script type="text/brightscript" uri="pkg:/source/Services/ContentViews.brs" />
  <!-- Script del servicio de programas para pedir Program Summary. -->
  <script type="text/brightscript" uri="pkg:/source/Services/Programs.brs" />
  <!-- Script de enums usados para runAction. -->
  <script type="text/brightscript" uri="pkg:/source/Enums.brs" />
  <!-- Script de dominio activo. -->
  <script type="text/brightscript" uri="pkg:/source/Services/DomainManager.brs" />
  <!-- Script de administraci贸n de errores. -->
  <script type="text/brightscript" uri="pkg:/source/Services/ErrorManager.brs" />
  <!-- Script de c贸digos de error. -->
  <script type="text/brightscript" uri="pkg:/source/Services/ErrorCode.brs" />
  <script type="text/brightscript" uri="pkg:/source/Services/Health.brs" />

  <interface>
    <!-- Nodo loading compartido que llega desde MainScene. -->
    <field id="loading" type="node" />
    <!-- Campo para recibir el payload de navegaci贸n desde MainScreen. -->
    <field id="data" type="string" onChange="onDataChange" />
    <!-- Campo para habilitar/deshabilitar el foco del componente. -->
    <field id="onFocus" type="boolean" value="false" onChange="initFocus" />
    <!-- Salida hacia MainScene para abrir Player cuando el item seleccionado es reproducible. -->
    <field id="streaming" type="string" />
    <!-- Salida hacia MainScene para abrir detalle cuando el item seleccionado no es canal directo. -->
    <field id="detail" type="string" />
  </interface>

  <children>
    <!-- Fondo principal para mostrar imagen de programa igual que MainScreen. -->
    <Poster
      id="programImageBackground"
      loadDisplayMode="scaleToZoom"
      uri="pkg:/images/client/info_gradient.png" />

    <!-- Gradiente frontal sobre el fondo como en MainScreen. -->
    <Poster
      id="infoGradient"
      loadDisplayMode="scaleToFit"
      uri="pkg:/images/client/info_gradient.png" />

    <!-- Componente de resumen de programa mostrado en la zona superior. -->
    <ProgramSummary
      id="programInfo"
      visible="false"
      translation="[50,50]"/>

    <!-- Contenedor de listado inferior para el listado de programas de ViewAll. -->
    <Group id="carousels" translation="[50, 135]">
      <!-- Contenedor interno del RowList de ViewAll. -->
      <Group id="carouselContainer" translation="[50, 20]">
        <RowList id="viewAllRowList" focusable="true" />
      </Group>
      <!-- Indicador de selecci贸n reutilizado para el carrusel. -->
      <SelectionBox id="selectedIndicator" visible="false"/>
    </Group>

    <!-- Timer para diferir la llamada de Program Summary al cambiar el foco. -->
    <Timer id="programTimer" repeat="false" duration="0.5"/>
  </children>
</component>
