<?xml version="1.0" encoding="utf-8" ?>

<component 
    name="Guide" 
    extends="Group"
    xsi:noNamespaceSchemaLocation="https://devtools.web.roku.com/schema/RokuSceneGraph.xsd">
    
    <script type="text/brightscript" uri="Guide.brs" />
    <script type="text/brightscript" uri="pkg:/source/Utils/i18nUtils.brs" />
    <script type="text/brightscript" uri="pkg:/source/Utils.brs" />
    <script type="text/brightscript" uri="pkg:/source/Utils/DateFunctions.brs" />
    <script type="text/brightscript" uri="pkg:/source/Enums.brs" />

    <script type="text/brightscript" uri="pkg:/source/Services/Epg.brs" />
    <script type="text/brightscript" uri="pkg:/source/Services/ParentalControl.brs" />

    <interface>
        <!-- Paramentros de Entrada -->
        <field id="loading" type="node" />
        <field id="items" type="array" onChange="loadChannelArray"/>
        <field id="channelId" type="integer" value="0" onChange="positionChannel"/>
        <field id="channelIdIndexOf" type="integer" value="-1"/>
        <field id="visible" type="boolean" />
        <field id="positioninChannelId" type="boolean" value="false" onChange="onShowPositioninChannelId"/>
        <field id="searchChannelPosition" type="boolean" value="false" onChange="onSearchChannelPosition"/>
        
        <!-- Paramentros de Salida -->
        <field id="selected" type="string"/>
        <field id="logout" alwaysnotify="true" type="boolean" value="false" />
    </interface>

    <children> 
        <Poster 
            id="background"
            uri="pkg:/images/shared/gradient_carousel_guide.png" 
            translation="[0, 0]"/>
        

        <!-- Contendor principal -->
        <LayoutGroup
            id="guideContainer"
            layoutDirection="vert"
            horizAlignment="custom"
            vertAlignment="bottom"
            itemSpacings="[10]">
            
            <ProgramSummaryPlayer id="programSummaryPlayer" showAvailableView="true"/>
        
            <Group translation="[0, 0]">
                <!-- Contenedor del carousel  -->
                <Group id="carouselContainer">
                    <Group id="carouselGuideContainer" translation="[0,0]" >
                        <QvTargetList 
                            id="carouselGuide"
                            translation="[0,0]"
                            advanceKey="right" 
                            reverseKey="left" 
                            focusable="true"/>
                    </Group>

                    <SelectionBox id="selectedIndicator" visible="false"/>
                </Group>

                <!-- Contenedor de la lista de canales  -->
                <Rectangle 
                    id="channelContainer"
                    color="0x00000000">

                    <Group id="guideGroup">
                        <!-- arrow up -->
                        <Poster 
                            id="arrowUp"
                            loadDisplayMode="scaleToFit"
                            uri="pkg:/images/shared/arrow_up.png" 
                            opacity="0.8"/>

                        <!-- prev channel -->
                        <Group id="prevContainer" opacity="0.6"> 
                            <Label
                                id="prevChannelNumber"
                                translation="[0, 0]"
                                wrap="false" 
                                maxLines="1" 
                                vertAlign="center"
                                horizAlign="center"
                                opacity="0.6"
                                font="font:TinySystemFont" />

                            <Poster 
                                id="prevChannelImage"
                                opacity="0.6"
                                loadDisplayMode="scaleToFit"/>
                        </Group>
                        
                        <!-- current channel -->
                        <Group id="currentChannelContainer"> 
                            <Label
                                id="currentChannelNumber"
                                translation="[0, 0]"
                                wrap="false" 
                                maxLines="1" 
                                vertAlign="center"
                                horizAlign="center"
                                focusable="true"
                                font="font:TinySystemFont" />


                            <Poster 
                                id="currentChannelImage"
                                loadDisplayMode="scaleToFit"
                                focusable="true"/>
                        </Group>

                        <!-- next channel -->
                        <Group id="nextChannelContainer" opacity="0.6"> 
                            <Label
                                id="nextChannelNumber"
                                translation="[0, 0]"
                                wrap="false" 
                                maxLines="1" 
                                vertAlign="center"
                                horizAlign="center"
                                opacity="0.6"
                                font="font:TinySystemFont" />

                            <Poster 
                                id="nextChannelImage"
                                opacity="0.6"
                                loadDisplayMode="scaleToFit"/>
                        </Group>

                        <!-- arrow down -->
                        <Poster 
                            id="arrowDown"
                            loadDisplayMode="scaleToFit"
                            uri="pkg:/images/shared/arrow_down.png" 
                            opacity="0.8"/>
                    </Group>
                </Rectangle>
            </Group>

        </LayoutGroup>

        <!-- Contenedor del Detalle para la Guia  -->
        <Group id="detailGuideContainer" translation="[0, 0]"/>
            
        <Timer id="changeUp" repeat="false" duration="0.4"/>
        <Timer id="changeDown" repeat="false" duration="0.4"/>

    </children>

</component>
